<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Devis Béton - Lafarge</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        #devis {
            display: none;
            margin-top: 20px;
            border: 2px solid #ccc;
            padding: 20px;
            border-radius: 10px;
            width: 500px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            border: 1px solid #aaa;
            padding: 8px;
            text-align: center;
        }
        .titre {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .total {
            font-weight: bold;
            background-color: #eaeaea;
        }
    </style>
</head>
<body>

<h2>Calcul de Devis pour dalle béton - Lafarge</h2>

<form id="formulaire">
    <label for="surface">Surface (m²) :</label>
    <input type="number" id="surface" required><br><br>

    <label for="epaisseur">Épaisseur (cm, entre 15 et 35) :</label>
    <input type="number" id="epaisseur" required><br><br>

    <button type="button" onclick="calculerDevis()">Obtenir le devis</button>
</form>

<div id="devis">
    <div class="titre">DEVIS - Lafarge</div>
    <p id="infos"></p>
    <table>
        <tr>
            <th>Description</th>
            <th>Prix</th>
            <th>Quantité</th>
            <th>Total</th>
        </tr>
        <tr>
            <td>Béton (91€/m³)</td>
            <td>91€</td>
            <td id="vol"></td>
            <td id="prixBeton"></td>
        </tr>
        <tr>
            <td>Livraisons (140€/camion)</td>
            <td>140€</td>
            <td id="nbCamions"></td>
            <td id="prixTransport"></td>
        </tr>
        <tr class="total">
            <td colspan="3">Total HT</td>
            <td id="totalHT"></td>
        </tr>
        <tr>
            <td colspan="3">TVA (20%)</td>
            <td id="tva"></td>
        </tr>
        <tr class="total">
            <td colspan="3">Total TTC</td>
            <td id="totalTTC"></td>
        </tr>
    </table>
</div>

<script>
function calculerDevis() {
    let surface = parseFloat(document.getElementById("surface").value);
    let epaisseur = parseFloat(document.getElementById("epaisseur").value);

    if (isNaN(surface) || isNaN(epaisseur) || surface <= 0 || epaisseur < 15 || epaisseur > 35) {
        alert("Merci de saisir des valeurs valides : surface > 0, épaisseur entre 15 et 35 cm.");
        return;
    }

    // Volume en m3
    let volume = surface * (epaisseur / 100); 
    let volumeArrondi = Math.ceil(volume); 

    // Quantité ciment (350kg/m³) => en tonnes
    let cimentKg = volume * 350;
    let cimentT = cimentKg / 1000;

    // Nombre de camions (9m³ chacun)
    let camions = Math.ceil(volume / 9);

    // Calculs prix
    let prixBeton = volume * 91;
    let prixTransport = camions * 140;
    let totalHT = prixBeton + prixTransport;
    let tva = totalHT * 0.20;
    let totalTTC = totalHT + tva;

    // Affichage
    document.getElementById("infos").innerHTML = 
        `Surface : ${surface} m²<br>Épaisseur : ${epaisseur} cm<br>Volume : ${volume.toFixed(2)} m³<br>Ciment : ${cimentT.toFixed(2)} tonnes<br>Nombre de camions : ${camions}`;

    document.getElementById("vol").innerText = volumeArrondi + " m³";
    document.getElementById("prixBeton").innerText = prixBeton.toFixed(2) + " €";
    document.getElementById("nbCamions").innerText = camions;
    document.getElementById("prixTransport").innerText = prixTransport.toFixed(2) + " €";
    document.getElementById("totalHT").innerText = totalHT.toFixed(2) + " €";
    document.getElementById("tva").innerText = tva.toFixed(2) + " €";
    document.getElementById("totalTTC").innerText = totalTTC.toFixed(2) + " €";

    document.getElementById("devis").style.display = "block";
}
</script>

</body>
</html>

